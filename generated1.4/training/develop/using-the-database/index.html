<!DOCTYPE html>
<html>

<head>

  <meta name="description" content="A high-level introduction to the component parts of the Couchbase Mobile product." />
  <meta name="version" content="1.4" />
  <meta name="product" content="mobile" />
  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MVPNN2');</script>
  <!-- End Google Tag Manager -->
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <link rel="shortcut icon" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"Â  href="/webfiles/1498186094252/images/icons/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/webfiles/1498186094252/images/icons/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!--    _____________________________
  _______/ Support for legacy browsers \_______________________________________-->
  <!--[if lte IE 8]>
  <script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/vendor/html5shiv.js" />
  <script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/vendor/respond.js" />
  <![endif]-->
  <!--[if IE 9]>
  <script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/classList.js" />
  <![endif]-->
  <!--_________________________________________________________________________-->
  <script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/jquery-migrate.js"></script>
  <script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/slick.js"></script>
  <script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/isotope.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/imagesloaded.min.js"></script>

  <meta name="apple-mobile-web-app-title" content="Couchbase">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="1gPO0RaMzKyZJFpS-iyIEnPsWDztwZH0R3vG1VpSwvM" />

  <!-- LOCAL CSS Libs -->
  <link rel="stylesheet" href="https://developer.couchbase.com/webfiles/1498186094252/css/styles.css">

  <!-- Default canonical comes from the URL -->
  <link rel="canonical" href="http://developer.couchbase.com"/>
  <title>Couchbase</title>
  <link rel="stylesheet" href="https://developer.couchbase.com/binaries/content/assets/css/overrides.css">
</head>

<body>

<!-- Google Tag Manager -->
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0"
          width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager -->
<script>
  var overrideJsPath = "/binaries/content/assets/js/overrides.js";
  $.ajax({
    url: overrideJsPath,
    type: 'HEAD',
    error: function () {
    },
    success: function () {
      // file exists
      $.getScript(overrideJsPath);
    }
  });
</script>
<!--    ________________
_______/ INCLUDE HEADER - BODY - FOOTER \____________________________________________________-->
<!-- begin - include ref= -->
<nav class="aux">
  <div>
  </div>
</nav>
<!-- Beginning of site.../jsp/base/header.jsp -->
<header id="global-header" class="global-header dev-portal">
  <div class="layout-wrapper">
    <div class="global-header__logo">
      <a href='http://www.couchbase.com'>Couchbase</a>
      <a href='index.html'>Developer</a>

    </div>

    <a data-modules="navigation,globalheadersearch"></a>
    <nav role="navigation" id="primary-navigation" class="primary-navigation">
      <button aria-controls="primary-navigation__wrapper"
              aria-pressed="false"
              class="primary-navigation__toggler"
              type="button">

        <span>Menu</span>
      </button>
      <div id="primary-navigation__wrapper"
           class="primary-navigation__wrapper"
           aria-expanded="false">

        <ul class="primary-navigation__items">
          <li class="primary-navigation__item ">

            <a href="https://developer.couchbase.com/documentation/server/current/introduction/intro.html">Server</a>
          </li>
          <li class="primary-navigation__item ">

            <a href="https://developer.couchbase.com/mobile">Mobile</a>
          </li>
          <li class="primary-navigation__item has-secondary-navigation">

            <a href="https://developer.couchbase.com/community">Community</a>
            <div class="secondary-navigation">
              <ul class="secondary-navigation__items">
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/open-source-projects">Open Source Projects</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/contribute">Contribute</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://www.couchbase.com/nosql-resources/events">Events</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/experts-and-champions">Experts &amp; Champions</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://forums.couchbase.com/">Forums</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://blog.couchbase.com">Blogs</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/support">Support</a>
                </li>
              </ul>
            </div>
          </li>
          <li class="primary-navigation__item has-secondary-navigation">

            <a href="https://developer.couchbase.com/guides-and-references">Site Map</a>
            <div class="secondary-navigation">
              <ul class="secondary-navigation__items">
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#section-1">Couchbase Server</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#section-2">Couchbase Mobile</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#subsection-1-3">SDKs</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#subsection-1-5">Connectors</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/documentation-archive">Documentation Archive</a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
        <form id="global-header-search"
              autocomplete="off"
              class="global-header-search global-header-search--js"
              action="https://developer.couchbase.com/search"
              aria-expanded="false">
          <ul><!--
            ---><li>
            <label for="global-header-search__query">
              Search query
            </label>
            <input
                    type="search"
                    placeholder="Search"
                    name="q"
                    value=""
                    id="global-header-search__query">
          </li><!--
                ---><li>
            <button type="submit">
              <span>Search</span>
            </button>
          </li><!--
        ---></ul>
          <button aria-controls="global-header-search__items"
                  aria-pressed="false"
                  class="global-header-search__toggler"
                  type="button">
            <span>Search</span>
          </button><!--
        --->

          <div style="display: none" about="custom-search-fields">

            <input type="hidden"
                   name="cx"
                   value="017928787631531434501:3e7lwhjxsom" />
            <input type="hidden"
                   name="cof"
                   value="FORID:11" />
            <input type="hidden"
                   name="safe"
                   value="off" />
            <input type="hidden"
                   name="form_build_id"
                   value="form-RrbKDUhO3kB2MiqBdZHIQI9L4LFE7c3L_s87N2B9BZo" />
            <input type="hidden"
                   name="form_id"
                   value="google_cse_results_searchbox_form" />
            <input type="hidden"
                   name="siteurl"
                   value='developer.couchbase.com' />

          </div>
        </form>
      </div>
    </nav>
    <a class="global-header__download-button" href="https://developer.couchbase.com/downloads">
      Download
    </a>
  </div>
</header>

<div class="page-content">
  <div class="wrapper">
    <main id="global-content" class="global-content" role="main">

  <div id="page-template-attributes" data-template-id="" data-template-class="learn-support-sec article-tpl"></div>

  <!-- LEFTNAV and ARTICLE -->
  <section class="tpl-body">
    <div class="wrapper">
      <div class="cols">
        <aside class="col one-fifth section-nav left-rail">
          <nav role="navigation" aria-label="Secondary" style="width: 100%;">
            <div class="toc collapsible" style="display: block;">
              



<!-- Used in the left nav to find the relative URL -->




<nav style="width: 100%;" role="navigation" aria-label="Secondary" class="toc collapsible">
  <ul class="main collapsed">
    
      <li class="isexpanded open ">
      
        
          <a href="../../../whatsnew.html">What's new</a>
        
      
      
      </li>
    
      <li class=" ishidden">
      
        <a href="#" class="static">Hidden Files For Redirects</a>
      
      
        <ul>
          
          <li class=" ">
            
              
                <a href="../../../guides/sync-gateway/views/index.html">Creating and querying a View</a>
              
            
            
          </li>
          
        </ul>
      
      </li>
    
      <li class="isexpanded open ">
      
        
          <a href="../../../installation/index.html">Getting Started</a>
        
      
      
        <ul>
          
          <li class=" ">
            
              
                <a href="../../../installation/ios/index.html">iOS/tvOS/macOS</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/android/index.html">Android</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/net/index.html">.NET</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/xamarin/index.html">Xamarin</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/java/index.html">Java</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/phonegap/index.html">PhoneGap</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../installation/sync-gateway/index.html">Sync Gateway</a>
              
            
            
          </li>
          
        </ul>
      
      </li>
    
      <li class=" ">
      
        
          <a href="../../../training/index.html">Tutorial</a>
        
      
      
        <ul>
          
          <li class=" ">
            
              <a href="#" class="static">Design</a>
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../training/design/data-modeling/index.html">Data Modeling</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/design/security/index.html">Access Control</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
          <li class=" ">
            
              <a href="#" class="static">Develop</a>
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../training/develop/create-database/index.html">Create a Database</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a class="selected" href="../../../training/develop/using-the-database/index.html">Using the Database</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/develop/adding-synchronization/index.html">Adding Sync</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/develop/adding-security/index.html">Adding Security</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/develop/integration/index.html">Integration</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
          <li class=" ">
            
              <a href="#" class="static">Deploy</a>
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../training/deploy/install/index.html">Install</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/deploy/upgrade/index.html">Upgrade</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../training/deploy/scale/index.html">Scale</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
        </ul>
      
      </li>
    
      <li class="isexpanded open ">
      
        
          <a href="../../../guides/index.html">Guides</a>
        
      
      
        <ul>
          
          <li class=" ">
            
              
                <a href="../../../guides/couchbase-lite/native-api/data-modeling/index.html">Data Modeling</a>
              
            
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../guides/couchbase-lite/index.html">Couchbase Lite</a>
              
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/couchbase-lite/native-api/index.html">Native API</a>
                  
                
                
                <ul>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/manager/index.html">Manager</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/database/index.html">Database</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/document/index.html">Document</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/revision/index.html">Revision</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/attachment/index.html">Attachment</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/view/index.html">View</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/query/index.html">Query</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/replication/index.html">Replication</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/peer-to-peer/index.html">Peer-to-peer</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/native-api/model/index.html">Model (iOS only)</a>
                      
                    
                    
                  </li>
                  
                </ul>
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/couchbase-lite/tech-notes/index.html">Technical Notes</a>
                  
                
                
                <ul>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/couchbase-lite/tech-notes/cbl-encryption/index.html">Encrypting Databases</a>
                      
                    
                    
                  </li>
                  
                </ul>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../guides/sync-gateway/index.html">Sync Gateway</a>
              
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/config-properties/index.html">Configuration file</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/command-line-options/index.html">Command line options</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/authorizing-users/index.html">Authorizing Users</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/channels/index.html">Data Routing</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/sync-function-api-guide/index.html">Sync Function API</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/server-integration/index.html">Webhooks and changes feed</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/deployment/index.html">Deployment considerations</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/upgrade/index.html">Upgrade</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/nginx/index.html">Load Balancer</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/database-offline/index.html">Taking databases offline and online</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/os-level-tuning/index.html">OS Level Tuning</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/resolving-conflicts/index.html">Resolving Conflicts</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/integrating-external-stores/index.html">Integrating External Stores</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/running-replications/index.html">Running replications</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/rest-api-client/index.html">REST API Client</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/sgcollect-info/index.html">SGCollect Info</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/configuring-ssl/index.html">Configuring SSL</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/bucket-shadowing/index.html">Bucket Shadowing</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/sync-gateway/accelerator.html">Accelerator</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../guides/authentication/index.html">Authentication</a>
              
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/authentication/basic-authentication/index.html">Basic Authentication</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/authentication/openid/index.html">OpenID Connect</a>
                  
                
                
                <ul>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/authentication/openid/configuration-options/index.html">Configuration Options</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/authentication/openid/advanced-topics/index.html">Advanced Topics</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/authentication/openid/google/index.html">How-To: Google</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../guides/authentication/openid/active-directory/index.html">How-To: Active Directory</a>
                      
                    
                    
                  </li>
                  
                </ul>
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/authentication/custom-authentication/index.html">Custom Authentication</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../guides/authentication/static-providers/index.html">Static Providers</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
        </ul>
      
      </li>
    
      <li class="isexpanded open ">
      
        
          <a href="../../../references/index.html">API References</a>
        
      
      
        <ul>
          
          <li class=" ">
            
              
                <a href="../../../references/couchbase-lite/index.html">Couchbase Lite</a>
              
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../references/couchbase-lite/couchbase-lite/index.html">Native API</a>
                  
                
                
                <ul>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/manager/index.html">Manager</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/manager/manager/index.html">Manager</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/manager/manager-options/index.html">ManagerOptions</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/manager/database-options/index.html">DatabaseOptions</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/database/index.html">Database</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/database/database/index.html">Database</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/database/validation-context/index.html">ValidationContext</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/document/index.html">Document</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/document/document/index.html">Document</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/document/document-change/index.html">Document Change</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/revision/index.html">Revision</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/revision/revision/index.html">Revision</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/revision/saved-revision/index.html">Saved Revision</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/revision/unsaved-revision/index.html">Unsaved Revision</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/attachment/index.html">Attachment</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/attachment/attachment/index.html">Attachment</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/view/index.html">View</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/view/view/index.html">View</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/view/view-compiler/index.html">View Compiler</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/query/index.html">Query</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/query/query/index.html">Query</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/query/live-query/index.html">Live Query</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/query/query-enumerator/index.html">QueryEnumerator</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/query/query-row/index.html">QueryRow</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/couchbase-lite/replication/index.html">Replication</a>
                      
                    
                    
                    <ul>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/replication/replication/index.html">Replication</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/replication/authenticator/index.html">Authenticator</a>
                          
                        
                        
                      </li>
                      
                      <li class=" ">
                        
                          
                          <a href="../../../references/couchbase-lite/couchbase-lite/replication/authenticator-factory/index.html">AuthenticatorFactory</a>
                          
                        
                        
                      </li>
                      
                    </ul>
                    
                  </li>
                  
                </ul>
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../references/couchbase-lite/rest-api/index.html">REST API</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../references/couchbase-lite/release-notes/index.html">Release notes</a>
                  
                
                
                <ul>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/release-notes/iOS/index.html">iOS</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/release-notes/Java/index.html">Java</a>
                      
                    
                    
                  </li>
                  
                  <li class=" ">
                    
                      
                      <a href="../../../references/couchbase-lite/release-notes/Dot-Net/index.html">.NET</a>
                      
                    
                    
                  </li>
                  
                </ul>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class=" ">
            
              
                <a href="../../../references/sync-gateway/index.html">Sync Gateway</a>
              
            
            
            <ul>
              
              <li class=" ">
                
                  
                    <a href="../../../references/sync-gateway/rest-api/index.html">Public REST API</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../references/sync-gateway/admin-rest-api/index.html">Admin REST API</a>
                  
                
                
              </li>
              
              <li class=" ">
                
                  
                    <a href="../../../references/sync-gateway/release-notes/index.html">Release notes</a>
                  
                
                
              </li>
              
            </ul>
            
          </li>
          
        </ul>
      
      </li>
    
  </ul>
</nav>
            </div>
          </nav>
        </aside>
        <div class="col four-fifths article">
          <div class="story">
            <div class="body">
              
              
              
              <!-- Do not import the overridden styles on swagger ui pages -->
              
              <link rel="stylesheet" type="text/css" href="https://couchbase-docs.s3.amazonaws.com/mobile/assets/styles.css">
              
              
              
              <a class="edit-page-link" href="https://github.com/couchbaselabs/couchbase-mobile-portal/tree/master/md-docs/_1x/training/develop/using-the-database/04-using-the-database.md" target="_blank">Edit on GitHub</a>
              

              <div class="inner-content">
                <!-- Style API ref links -->
                <style>
                  a > code {
                    text-decoration: underline;
                    color: #0099e5;
                    background: #f5f7f7;
                    border-radius: 5px;
                    padding: 3px 6px;
                    margin: 0 1px;
                  }
                </style>
                <!-- Platform tabs -->
                <!-- TODO: Make visible when ready to show multi-platform training -->
                <div class="toggler">
                  <style>
                    .toggler a {
                      display: inline-block;
                      padding: 3px 20px;
                      margin: 2px;
                      border: 1px solid #00739c;
                      border-radius: 3px;
                      text-decoration: none !important;
                    }
                    .display-platform-ios .toggler .button-ios,
                    .display-platform-android .toggler .button-android,
                    .display-platform-rn .toggler .button-rn,
                    .display-platform-wpf .toggler .button-wpf,
                    .display-platform-csharp .toggler .button-csharp,
                    .display-platform-xam .toggler .button-xam,
                    .display-platform-swift .toggler .button-swift,
                    .display-platform-objc .toggler .button-objc,
                    .display-platform-java .toggler .button-java {
                      background-color: #00739c;
                      color: white;
                    }

                    block { display: none; }

                    .display-platform-ios .ios,
                    .display-platform-android .android,
                    .display-platform-rn .rn,
                    .display-platform-net .net,
                    .display-platform-csharp .csharp,
                    .display-platform-wpf .wpf,
                    .display-platform-xam .xam,
                    .display-platform-all .all,
                    .display-platform-swift .swift,
                    .display-platform-objc .objc,
                    .display-platform-java .java {
                      display: block;
                    }
                    .inner-content .inline:not(.tab-nav) {
                      display: none;
                    }
                    /* Must change the display mode for striped method names.
                       This works with the StripingTag Jekyll plugin. */
                    .display-platform-ios .ios.inline,
                    .display-platform-android .android.inline,
                    .display-platform-net .net.inline,
                    .display-platform-csharp .csharp.inline,
                    .display-platform-swift .swift.inline,
                    .display-platform-objc .objc.inline,
                    .display-platform-java .java.inline {
                      display: inline;
                    }
                  </style>
                  <div id="platform-tabs" class="hide">
                    <span>Platform:</span>
                    
                    <a href="javascript:void(0);" class="button-ios" onclick="display('platform', 'ios')">iOS</a>
                    <a href="javascript:void(0);" class="button-android" onclick="display('platform', 'android')">Android</a>
                    <a href="javascript:void(0);" class="button-wpf" onclick="display('platform', 'wpf')">WPF</a>
                    
                  </div>
                </div>
                <!-- SDK buttons -->
                <div id="swagger-libs" style="display: none;">
                  <span>Sync Gateway Public REST API:</span>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('java', 'public')">Java</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('csharp', 'public')">C#</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('go', 'public')">Go</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('python', 'public')">Python</a>
                  <br>
                  <span>Sync Gateway Admin REST API:</span>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('go', 'admin')">Go</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('python', 'admin')">Python</a>
                  <br>
                  <span>Couchbase Lite REST API:</span>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('java', 'lite')">Java</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('csharp', 'lite')">C#</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('swift', 'lite')">Swift</a>
                  <a href="javascript:void(0);" class="button" onclick="getSDK('python', 'lite')">Python</a>
                </div>
                <!-- Markdown content -->
                <p>In this lesson youâll be introduced to Couchbase Lite, our embedded NoSQL database. Youâll learn how to create, read, update, delete, and query data using Couchbase Lite.</p>

<p><block class="ios" /></p>
<h4><a class="anchor instructions" name="requirements"></a>Requirements<a class="hash-link instructions" href="#requirements"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<ul>
<li>Xcode 8 (Swift 3)</li>
</ul>
<h4><a class="anchor instructions" name="getting-started"></a>Getting Started<a class="hash-link instructions" href="#getting-started"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>Download the project below.</p>

<div class="buttons-unit downloads">
  <a href="https://cl.ly/3f263e2O0837/project.zip" class="button" id="project">
    <img src="img/download-xcode.png">
  </a>
</div>

<p>Unzip the file and install Couchbase Lite using the install script.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>xcode-project
<span class="nv">$ </span>./install.sh
</code></pre></div>
<p>Open <strong>Todo.xcodeproj</strong> in Xcode. Then build &amp; run the project.</p>

<p><block class="net" /></p>
<h4><a class="anchor instructions" name="requirements"></a>Requirements<a class="hash-link instructions" href="#requirements"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<ul>
<li>Visual Studio 2015+ (Windows) or Xamarin Studio 6+ (OS X)</li>
</ul>
<h4><a class="anchor instructions" name="getting-started"></a>Getting Started<a class="hash-link instructions" href="#getting-started"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>Download the project below.</p>

<div class="buttons-unit downloads">
  <a href="https://cl.ly/3f263e2O0837/project.zip" class="button" id="project">
    <img src="img/download-vs.png">
  </a>
</div>

<p><block class="android" /></p>
<h4><a class="anchor instructions" name="requirements"></a>Requirements<a class="hash-link instructions" href="#requirements"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<ul>
<li>Android Studio 2.2</li>
<li>Android SDK 24</li>
<li>Android Build Tools 24.0.3</li>
<li>JDK 8</li>
<li>â ï¸ Docker and x86 Android emulators are <a href="http://stackoverflow.com/questions/37397810/android-studio-unable-to-run-avd">not compatible</a> (i.e cannot run simultaneously on the same machine). Make sure Docker isn&#39;t running in the background when deploying the application to an x86 Android emulator.</li>
</ul>
<h4><a class="anchor instructions" name="getting-started"></a>Getting Started<a class="hash-link instructions" href="#getting-started"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>Download the project below.</p>

<div class="buttons-unit downloads">
  <a href="https://cl.ly/3f263e2O0837/project.zip" class="button" id="project">
    <img src="img/download-android.png">
  </a>
</div>

<p><block class="all" /></p>

<blockquote>
<p><strong>Tip:</strong> To make things a bit more exciting, you may want to use the pre-built database containing a list of Groceries. Refer to the <a href="/documentation/mobile/1.3/training/develop/create-database/index.html">Create a Database</a> lesson to learn how to use it.</p>
</blockquote>
<h2><a class="anchor instructions" name="create-a-document"></a>Create a Document<a class="hash-link instructions" href="#create-a-document"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>In Couchbase Lite, the primary entity stored in a database is called a document instead of a &quot;row&quot; or &quot;record&quot;. A document&#39;s body takes the form of a JSON object â a collection of key/value pairs where the values can be different types of data such as numbers, strings, arrays or even nested objects. The code below creates a new list document.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the createTaskList(name:) method</span>
<span class="k">let</span> <span class="nv">properties</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"task-list"</span><span class="p">,</span>
    <span class="s">"name"</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
    <span class="s">"owner"</span><span class="p">:</span> <span class="n">username</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">docId</span> <span class="o">=</span> <span class="n">username</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="kt">NSUUID</span><span class="p">()</span><span class="o">.</span><span class="n">uuidString</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">doc</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="nf">document</span><span class="p">(</span><span class="nv">withID</span><span class="p">:</span> <span class="n">docId</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kt">Ui</span><span class="o">.</span><span class="nf">showMessageDialog</span><span class="p">(</span><span class="nv">onController</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Error"</span><span class="p">,</span>
        <span class="nv">withMessage</span><span class="p">:</span> <span class="s">"Couldn't save task list"</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">try</span> <span class="n">doc</span><span class="o">.</span><span class="nf">putProperties</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">NSError</span> <span class="p">{</span>
    <span class="kt">Ui</span><span class="o">.</span><span class="nf">showMessageDialog</span><span class="p">(</span><span class="nv">onController</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Error"</span><span class="p">,</span>
        <span class="nv">withMessage</span><span class="p">:</span> <span class="s">"Couldn't save task list"</span><span class="p">,</span> <span class="nv">withError</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// This code can be found in TaskListsModel.cs</span>
<span class="c1">// in the CreateTaskList(string) method</span>
<span class="kt">var</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="p">=</span> <span class="n">TaskListType</span><span class="p">,</span>
    <span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="p">=</span> <span class="n">name</span><span class="p">,</span>
    <span class="p">[</span><span class="s">"owner"</span><span class="p">]</span> <span class="p">=</span> <span class="n">Username</span>
<span class="p">};</span>

<span class="kt">var</span> <span class="n">docId</span> <span class="p">=</span> <span class="s">$"</span><span class="p">{</span><span class="n">Username</span><span class="p">}</span><span class="s">.</span><span class="p">{</span><span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">()}</span><span class="s">"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">doc</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">Document</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="n">doc</span> <span class="p">=</span> <span class="n">_db</span><span class="p">.</span><span class="nf">GetDocument</span><span class="p">(</span><span class="n">docId</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">doc</span><span class="p">.</span><span class="nf">PutProperties</span><span class="p">(</span><span class="n">properties</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">var</span> <span class="n">newException</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ApplicationException</span><span class="p">(</span><span class="s">"Couldn't save task list"</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
    <span class="k">throw</span> <span class="n">newException</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be found in ListsActivity.java</span>
<span class="c1">// in the createTaskList(String) method</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
<span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"type"</span><span class="o">,</span> <span class="s">"task-list"</span><span class="o">);</span>
<span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">title</span><span class="o">);</span>
<span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"owner"</span><span class="o">,</span> <span class="n">mUsername</span><span class="o">);</span>

<span class="n">String</span> <span class="n">docId</span> <span class="o">=</span> <span class="n">mUsername</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">();</span>

<span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">mDatabase</span><span class="o">.</span><span class="na">getDocument</span><span class="o">(</span><span class="n">docId</span><span class="o">);</span>
<span class="n">document</span><span class="o">.</span><span class="na">putProperties</span><span class="o">(</span><span class="n">properties</span><span class="o">);</span>
</code></pre></div>
<p><block class="all" /></p>

<p>Here you&#39;re creating an unsaved document instance with a pre-defined <strong>document ID</strong> (i.e. the <strong>_id</strong> property in the documentâs JSON body) using the <code>documentWithID</code> method. The ID follows the form <code>{username}.{uuid}</code> where username is the name of the user logged in. Alternatively, you could also use the <code>createDocument</code> method to let the database generate a random <strong>ID</strong> for you.</p>
<h3><a class="anchor instructions" name="try-it-out"></a>Try it out<a class="hash-link instructions" href="#try-it-out"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><block class="ios" /></p>

<ol>
<li>Build and run.</li>
<li>Create a new list using the &#39;+&#39; button on the application&#39;s &#39;Task lists&#39; screen.</li>
<li>A new list document is saved to the database.
<img src="img/image40.png" class="portrait" /></li>
</ol>

<p><block class="xam" /></p>

<ol>
<li>Build and run.</li>
<li>Create a new list using the &#39;+&#39; button on the application&#39;s &#39;Task lists&#39; screen.</li>
<li>A new list document is saved to the database.</li>
</ol>

<p><strong>iOS</strong>
<img src="img/image40.png" class="portrait" />
<strong>Android</strong>
<img src="img/image40xa.png" class="portrait" /></p>

<p><block class="wpf" /></p>

<ol>
<li>Build and run</li>
<li>Create a new list using the &#39;Action -&gt; Add List...&#39; command.</li>
<li>A new list document is saved to the database.</li>
</ol>

<p><img src="img/image40w.png" class="center-image" /></p>

<p><block class="android" /></p>

<ol>
<li>Build and run.</li>
<li>Create a new list using the &#39;+&#39; button on the application&#39;s &#39;Task lists&#39; screen.</li>
<li>A new list document is saved to the database.
<img src="img/image40a.png" class="portrait" /></li>
</ol>

<p><block class="all" /></p>

<blockquote>
<p><strong>Challenge:</strong> Update the code to persist your name as the value for the <code>name</code> field. Then create a new list and notice that your name is displayed instead of the text input value.</p>
</blockquote>
<h2><a class="anchor instructions" name="update-a-document"></a>Update a Document<a class="hash-link instructions" href="#update-a-document"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>To update a document, you must retrieve it from the database, modify the desired properties and write them back to the database. The <code>update</code> method does this operation for you in the form of a callback. The code below updates a list&#39;s name property.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the updateTaskList(list:withName:) method</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">list</span><span class="o">.</span><span class="n">update</span> <span class="p">{</span> <span class="n">newRev</span> <span class="k">in</span>
        <span class="n">newRev</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">NSError</span> <span class="p">{</span>
    <span class="kt">Ui</span><span class="o">.</span><span class="nf">showMessageDialog</span><span class="p">(</span><span class="nv">onController</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Error"</span><span class="p">,</span>
        <span class="nv">withMessage</span><span class="p">:</span> <span class="s">"Couldn't update task list"</span><span class="p">,</span> <span class="nv">withError</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// This code can be found in TaskListModel.cs</span>
<span class="c1">// in the Edit(string) method</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="n">_document</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">rev</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">props</span> <span class="p">=</span> <span class="n">rev</span><span class="p">.</span><span class="n">UserProperties</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">lastName</span> <span class="p">=</span> <span class="n">props</span><span class="p">[</span><span class="s">"name"</span><span class="p">];</span>
        <span class="n">props</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">rev</span><span class="p">.</span><span class="nf">SetUserProperties</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>

        <span class="k">return</span> <span class="p">!</span><span class="n">String</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">lastName</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ApplicationException</span><span class="p">(</span><span class="s">"Couldn't edit task list"</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be in ListsActivity.java</span>
<span class="c1">// in the updateList(Document) method</span>
<span class="n">list</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="k">new</span> <span class="n">Document</span><span class="o">.</span><span class="na">DocumentUpdater</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">update</span><span class="o">(</span><span class="n">UnsavedRevision</span> <span class="n">newRevision</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">props</span> <span class="o">=</span> <span class="n">newRevision</span><span class="o">.</span><span class="na">getUserProperties</span><span class="o">();</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
        <span class="n">newRevision</span><span class="o">.</span><span class="na">setUserProperties</span><span class="o">(</span><span class="n">props</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div>
<p><block class="all" /></p>

<p>Your callback code can modify this object&#39;s properties as it sees fit; after it returns, the modified revision is saved and becomes the current one.</p>
<h3><a class="anchor instructions" name="try-it-out"></a>Try it out<a class="hash-link instructions" href="#try-it-out"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><block class="ios" /></p>

<ol>
<li>Build and run.</li>
<li>Swipe to the left on a row to reveal the <strong>Edit</strong> button and update the List name in the pop-up.
<img src="img/image04.png" class="portrait" /></li>
</ol>

<p><block class="xam" /></p>

<ol>
<li>Build and run</li>
<li>On iOS, swipe to the left, and on Android long press on a row to reveal the <strong>Edit</strong> button and update the List name in the pop-up.</li>
</ol>

<p><strong>iOS</strong>
<img src="img/image04.png" class="portrait" />
<strong>Android</strong>
<img src="img/image04xa.png" class="portrait" /></p>

<p><block class="wpf" /></p>

<ol>
<li>Build and run</li>
<li>Right click on a row to reveal the <strong>Edit</strong> context action.  Click it and update the List name in the pop-up.</li>
</ol>

<p><img src="img/image04w.png" class="center-image" /></p>

<p><block class="android" /></p>

<ol>
<li>Build and run.</li>
<li>Long press on a row to reveal the action items. Click the update menu to change title of a list.</li>
</ol>

<p><img src="img/image04a.png" class="portrait" /></p>

<blockquote>
<p><strong>Challenge:</strong> Modify the code to uppercase the text inserted before persisting the document to the database.</p>
</blockquote>

<p><block class="all" /></p>
<h2><a class="anchor instructions" name="delete-a-document"></a>Delete a Document<a class="hash-link instructions" href="#delete-a-document"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>A document can be deleted using the <code>delete</code> method. This operation actually creates a new revision in order to propagate the deletion to other clients. The concept of revisions will be covered in more detail in the next lesson. The code below deletes a list.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the deleteTaskList(list:) method</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">list</span><span class="o">.</span><span class="nf">delete</span><span class="p">()</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">NSError</span> <span class="p">{</span>
    <span class="kt">Ui</span><span class="o">.</span><span class="nf">showMessageDialog</span><span class="p">(</span><span class="nv">onController</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Error"</span><span class="p">,</span>
        <span class="nv">withMessage</span><span class="p">:</span> <span class="s">"Couldn't delete task list"</span><span class="p">,</span> <span class="nv">withError</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// This code can be found in TaskListModel.cs</span>
<span class="c1">// in the Delete() method</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="n">_document</span><span class="p">.</span><span class="nf">Delete</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ApplicationException</span><span class="p">(</span><span class="s">"Couldn't delete task list"</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be found in ListsActivity.java</span>
<span class="c1">// in the deleteList(Document) method</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">CouchbaseLiteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p><block class="all" /></p>

<blockquote>
<p><strong>Challenge:</strong> Add a document change listener to detect when the document gets deleted. The <a href="/documentation/mobile/1.3/develop/guides/couchbase-lite/native-api/document/index.html#document-change-notifications">document change notification</a> documentation will be helpful for this challenge.</p>
</blockquote>
<h3><a class="anchor instructions" name="try-it-out"></a>Try it out<a class="hash-link instructions" href="#try-it-out"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><block class="ios" /></p>

<ol>
<li>Build and run.</li>
<li>Click the <strong>Delete</strong> action to delete a list.
<img class="portrait" src="https://cl.ly/383h2q2C2Z3V/image46.gif" /></li>
</ol>

<p><block class="xam" /></p>

<ol>
<li>Build and run.</li>
<li>On iOS, swipe to the left, and on Android long press on a row to reveal the <strong>Delete</strong> button.</li>
</ol>

<p><strong>iOS</strong>
<img src="img/image46.gif" class="portrait" />
<strong>Android</strong>
<img src="img/image46a.gif" class="portrait" /></p>

<p><block class="wpf" /></p>

<ol>
<li>Build and run.</li>
<li>Right click on a row to reveal the <strong>Delete</strong> context action.</li>
</ol>

<p><img src="https://cl.ly/2Z1s2z2e0Q0N/image46w.gif" class="center-image" /></p>

<p><block class="android" /></p>

<ol>
<li>Build and run.</li>
<li>Click the <strong>Delete</strong> action to delete a list.
<img class="portrait" src="https://cl.ly/262v3o381j2a/image46a.gif" /></li>
</ol>

<p><block class="all"/></p>
<h2><a class="anchor instructions" name="query-documents"></a>Query Documents<a class="hash-link instructions" href="#query-documents"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>The way to query data in Couchbase Lite is by registering a View and then running a Query on it with QueryOptions. The first thing to know about Couchbase Views is that they have nothing to do with UI views.</p>

<p>A <a href="/documentation/mobile/current/develop/guides/couchbase-lite/native-api/view/index.html">View</a> in Couchbase is a persistent index of documents in a database, which you then query to find data. The main component of a View is its map function. It takes a documentâs JSON as input, and emits (outputs) any number of key/value pairs to be indexed. First, you will define the view to index the documents of type <strong>task-list</strong>. The diagram below shows the result of the code you will review shortly.</p>

<p><img src="img/img.001.png" alt=""></p>

<p>So you can remember that a view index is a list of key/value pairs, sorted by key. In addition, the viewâs logic is written in the native language of the platform youâre developing on. The code below indexes documents as shown on the diagram above. Then it create the Query and monitors the result set using a Live Query.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the setupViewAndQuery method</span>
<span class="k">let</span> <span class="nv">listsView</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="nf">viewNamed</span><span class="p">(</span><span class="s">"list/listsByName"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">listsView</span><span class="o">.</span><span class="n">mapBlock</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="n">listsView</span><span class="o">.</span><span class="nf">setMapBlock</span><span class="p">({</span> <span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">emit</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span><span class="p">,</span> <span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
            <span class="p">,</span> <span class="n">type</span> <span class="o">==</span> <span class="s">"task-list"</span> <span class="p">{</span>
                <span class="nf">emit</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="nv">version</span><span class="p">:</span> <span class="s">"1.0"</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">listsLiveQuery</span> <span class="o">=</span> <span class="n">listsView</span><span class="o">.</span><span class="nf">createQuery</span><span class="p">()</span><span class="o">.</span><span class="nf">asLive</span><span class="p">()</span>
<span class="n">listsLiveQuery</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKeyPath</span><span class="p">:</span> <span class="s">"rows"</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="k">new</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="n">listsLiveQuery</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// This code can be found in TaskListsModel.cs</span>
<span class="c1">// in the SetupViewAndQuery() method</span>
<span class="kt">var</span> <span class="n">view</span> <span class="p">=</span> <span class="n">_db</span><span class="p">.</span><span class="nf">GetView</span><span class="p">(</span><span class="s">"list/listsByName"</span><span class="p">);</span>
<span class="n">view</span><span class="p">.</span><span class="nf">SetMap</span><span class="p">((</span><span class="n">doc</span><span class="p">,</span> <span class="n">emit</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(!</span><span class="n">doc</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"type"</span><span class="p">)</span> <span class="p">||</span> <span class="n">doc</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="k">as</span> <span class="kt">string</span> <span class="p">!=</span> <span class="s">"task-list"</span> <span class="p">||</span> <span class="p">!</span><span class="n">doc</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"name"</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">emit</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span> <span class="k">null</span><span class="p">);</span>
<span class="p">},</span> <span class="s">"1.0"</span><span class="p">);</span>

<span class="n">_byNameQuery</span> <span class="p">=</span> <span class="n">view</span><span class="p">.</span><span class="nf">CreateQuery</span><span class="p">().</span><span class="nf">ToLiveQuery</span><span class="p">();</span>

<span class="c1">// ...Changed lamdba omitted for brevity</span>

<span class="n">_byNameQuery</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be found in ListsActivity.java</span>
<span class="c1">// in the setupViewAndQuery() method</span>
<span class="n">com</span><span class="o">.</span><span class="na">couchbase</span><span class="o">.</span><span class="na">lite</span><span class="o">.</span><span class="na">View</span> <span class="n">listsView</span> <span class="o">=</span> <span class="n">mDatabase</span><span class="o">.</span><span class="na">getView</span><span class="o">(</span><span class="s">"list/listsByName"</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">listsView</span><span class="o">.</span><span class="na">getMap</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">listsView</span><span class="o">.</span><span class="na">setMap</span><span class="o">(</span><span class="k">new</span> <span class="n">Mapper</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">map</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">document</span><span class="o">,</span> <span class="n">Emitter</span> <span class="n">emitter</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">document</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"type"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="s">"task-list"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">emitter</span><span class="o">.</span><span class="na">emit</span><span class="o">(</span><span class="n">document</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"name"</span><span class="o">),</span> <span class="kc">null</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">},</span> <span class="s">"1.0"</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">listsLiveQuery</span> <span class="o">=</span> <span class="n">listsView</span><span class="o">.</span><span class="na">createQuery</span><span class="o">().</span><span class="na">toLiveQuery</span><span class="o">();</span>
</code></pre></div>
<p><block class="all" /></p>

<p>The <code>viewNamed</code> method returns a <a href="http://developer.couchbase.com/documentation/mobile/current/develop/guides/couchbase-lite/native-api/view/index.html">View</a> object on which the map function can be set. The map function is indexing documents where the type property is equal to &quot;task-list&quot;. Each cell on the screen will contain a list name and nothing else. For that reason, you can emit the name property as the key and nil is the value. If you also wanted to display the owner of the list in the row you could emit the <code>owner</code> property as the value.</p>

<p>The <code>listsView.createQuery()</code> method returns a <a href="/documentation/mobile/current/develop/guides/couchbase-lite/native-api/query/index.html">Query</a> object which has a <strong>run</strong> method to return the results as a <a href="/documentation/mobile/current/develop/references/couchbase-lite/couchbase-lite/query/query-enumerator/index.html">QueryEnumerator</a> object. However, in this case, you are hooking into a <a href="/documentation/mobile/current/develop/guides/couchbase-lite/native-api/query/index.html">Live Query</a> to keep monitoring the database for new results. Any time the result of that query changes through user interaction or synchronization, it will notify your application via the change event. A live query provides an easy way to build reactive UIs, which will be especially useful when you enable sync in the <a href="/documentation/mobile/current/training/develop/adding-synchronization/index.html">Adding Synchronization</a> lesson. The change event is triggered as a result of user interaction locally as well as during synchronization with Sync Gateway.</p>

<p><block class="ios" /></p>

<p>In the code blow, the notifications are posted to the application code using the KVO observer method.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the observeValue(forKeyPath:of:_:_:) method</span>
<span class="k">override</span> <span class="kd">func</span> <span class="nf">observeValue</span><span class="p">(</span><span class="n">forKeyPath</span> <span class="nv">keyPath</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span> <span class="n">of</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Any</span><span class="p">?,</span> <span class="nv">change</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSKeyValueChangeKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]?,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">UnsafeMutableRawPointer</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">object</span> <span class="k">as?</span> <span class="kt">NSObject</span> <span class="o">==</span> <span class="n">listsLiveQuery</span> <span class="p">{</span>
        <span class="nf">reloadTaskLists</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">object</span> <span class="k">as?</span> <span class="kt">NSObject</span> <span class="o">==</span> <span class="n">incompTasksCountsLiveQuery</span> <span class="p">{</span>
        <span class="nf">reloadIncompleteTasksCounts</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">// This code can be found in TaskListsModel.cs</span>
<span class="c1">// in the SetupViewAndQuery()</span>
<span class="n">_byNameQuery</span><span class="p">.</span><span class="n">Changed</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">TasksList</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">Rows</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">TaskListCellModel</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">DocumentId</span><span class="p">)));</span>
<span class="p">};</span>
</code></pre></div>
<p><block class="android" /></p>

<p>On Android you are using a utility class named <strong>LiveQueryAdapter</strong> which takes care of reloading the list when changes are received.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be found in LiveQueryAdapter.java</span>
<span class="c1">// in the public constructor</span>
<span class="n">query</span><span class="o">.</span><span class="na">addChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="n">LiveQuery</span><span class="o">.</span><span class="na">ChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changed</span><span class="o">(</span><span class="kd">final</span> <span class="n">LiveQuery</span><span class="o">.</span><span class="na">ChangeEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">((</span><span class="n">Activity</span><span class="o">)</span> <span class="n">LiveQueryAdapter</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">context</span><span class="o">).</span><span class="na">runOnUiThread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">enumerator</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getRows</span><span class="o">();</span>
                <span class="n">notifyDataSetChanged</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">query</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div>
<p><block class="all" /></p>
<h3><a class="anchor instructions" name="try-it-out"></a>Try it out<a class="hash-link instructions" href="#try-it-out"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<ol>
<li>Build and run.</li>
<li>Save a new list to the database and the live query will pick it up instantly and reload the table view.</li>
</ol>

<p><block class="ios" /></p>

<p><img src="https://cl.ly/3z3i0k1C2W1p/image66.gif" class="portrait" /></p>

<p><block class="wpf" /></p>

<p><img src="https://cl.ly/2L2j2t423Z3k/image66w.gif" class="center-image" /></p>

<p><block class="android" /></p>

<p><img src="https://cl.ly/44433I102l3q/image66a.gif" class="portrait" /></p>

<p><block class="all" /></p>

<blockquote>
<p><strong>Challenge:</strong> Update the map function to emit the document ID as the key. Don&#39;t forget to bump the view version whenever you change the map function. The list view should now display the document ID on each row.</p>
</blockquote>
<h2><a class="anchor instructions" name="aggregating-data"></a>Aggregating Data<a class="hash-link instructions" href="#aggregating-data"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>A problem in typical applications is how to perform data aggregation. Couchbase Lite lets you run those data queries using the full capabilities of map/reduce. To run aggregation queries on the rows emitted by the map function, you can use the reduce function which is the part of map/reduce that takes several rows from the index and aggregates them together in a single object.</p>

<p>Letâs write a view to query and display the number of uncompleted tasks for each list. A task is marked as completed if its <strong>complete</strong> property is true. You need to define a <strong>map</strong> function which:</p>

<ol>
<li>Returns the number of uncompleted task documents,</li>
<li>Groups them by the list they belong to,</li>
<li>Counts the number of rows in each group.</li>
</ol>

<p>The diagram below shows this process.</p>

<p><img src="./img/image32.png" alt=""></p>

<p>Notice that <strong>groupingLevel = 1</strong> coalesces the rows in the view index by their key.</p>

<p><a href="/documentation/mobile/current/develop/guides/couchbase-lite/native-api/query/index.html">Grouping</a> is a powerful feature of Couchbase Lite. It is available on a <strong>Query</strong> using the <strong>groupLevel</strong> property, which is a number, and it defaults to 0. It basically takes the entire range of output that the query produces (i.e. the entire range of rows) and it coalesces together adjacent rows with the same key.</p>

<p>The most commonly used aggregation functions are Count and Sum:</p>

<ul>
<li>Count: A function that counts the number of documents contained in the map (used on the diagram above).</li>
<li>Sum: A function that adds all of the items contained in the map.</li>
</ul>

<p>The code below indexes documents as shown on the diagram above. Then it create the Query and monitors the result set using a Live Query.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the setupViewAndQuery() method</span>
<span class="k">let</span> <span class="nv">incompTasksCountView</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="nf">viewNamed</span><span class="p">(</span><span class="s">"list/incompleteTasksCount"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">incompTasksCountView</span><span class="o">.</span><span class="n">mapBlock</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="n">incompTasksCountView</span><span class="o">.</span><span class="nf">setMapBlock</span><span class="p">({</span> <span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">emit</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="p">,</span> <span class="n">type</span> <span class="o">==</span> <span class="s">"task"</span> <span class="p">{</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">list</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">"taskList"</span><span class="p">]</span> <span class="k">as?</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">],</span> <span class="k">let</span> <span class="nv">listId</span> <span class="o">=</span> <span class="n">list</span><span class="p">[</span><span class="s">"id"</span><span class="p">],</span>
                <span class="k">let</span> <span class="nv">complete</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">"complete"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">Bool</span> <span class="p">,</span> <span class="o">!</span><span class="n">complete</span> <span class="p">{</span>
                <span class="nf">emit</span><span class="p">(</span><span class="n">listId</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="p">},</span> <span class="nv">reduce</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">reredeuce</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="n">count</span>
    <span class="p">},</span> <span class="nv">version</span><span class="p">:</span> <span class="s">"1.0"</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">incompTasksCountsLiveQuery</span> <span class="o">=</span> <span class="n">incompTasksCountView</span><span class="o">.</span><span class="nf">createQuery</span><span class="p">()</span><span class="o">.</span><span class="nf">asLive</span><span class="p">()</span>
<span class="n">incompTasksCountsLiveQuery</span><span class="o">.</span><span class="n">groupLevel</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">incompTasksCountsLiveQuery</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKeyPath</span><span class="p">:</span> <span class="s">"rows"</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="k">new</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="n">incompTasksCountsLiveQuery</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="kt">var</span> <span class="n">incompleteTasksView</span> <span class="p">=</span> <span class="n">_db</span><span class="p">.</span><span class="nf">GetView</span><span class="p">(</span><span class="s">"list/incompleteTasksCount"</span><span class="p">);</span>
<span class="n">incompleteTasksView</span><span class="p">.</span><span class="nf">SetMapReduce</span><span class="p">((</span><span class="n">doc</span><span class="p">,</span> <span class="n">emit</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(!</span><span class="n">doc</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"type"</span><span class="p">)</span> <span class="p">||</span> <span class="n">doc</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="k">as</span> <span class="kt">string</span> <span class="p">!=</span> <span class="s">"task"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(!</span><span class="n">doc</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"taskList"</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="n">JsonUtility</span><span class="p">.</span><span class="n">ConvertToNetObject</span><span class="p">&lt;</span><span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;&gt;(</span><span class="n">doc</span><span class="p">[</span><span class="s">"taskList"</span><span class="p">]);</span>
    <span class="k">if</span><span class="p">(!</span><span class="n">list</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span> <span class="p">||</span> <span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="s">"complete"</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="n">doc</span><span class="p">[</span><span class="s">"complete"</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">emit</span><span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="s">"id"</span><span class="p">],</span> <span class="k">null</span><span class="p">);</span>

 <span class="p">},</span> <span class="n">BuiltinReduceFunctions</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span> <span class="s">"1.0"</span><span class="p">);</span>

<span class="n">_incompleteQuery</span> <span class="p">=</span> <span class="n">incompleteTasksView</span><span class="p">.</span><span class="nf">CreateQuery</span><span class="p">().</span><span class="nf">ToLiveQuery</span><span class="p">();</span>
<span class="n">_incompleteQuery</span><span class="p">.</span><span class="n">GroupLevel</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>

<span class="c1">// ...Changed lambda omitted for brevity</span>

 <span class="n">_incompleteQuery</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This code can be found in ListsActivity.java</span>
<span class="c1">// in the setupViewAndQuery method</span>
<span class="n">com</span><span class="o">.</span><span class="na">couchbase</span><span class="o">.</span><span class="na">lite</span><span class="o">.</span><span class="na">View</span> <span class="n">incompTasksCountView</span> <span class="o">=</span> <span class="n">mDatabase</span><span class="o">.</span><span class="na">getView</span><span class="o">(</span><span class="s">"list/incompleteTasksCount"</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">incompTasksCountView</span><span class="o">.</span><span class="na">getMap</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">incompTasksCountView</span><span class="o">.</span><span class="na">setMapReduce</span><span class="o">(</span><span class="k">new</span> <span class="n">Mapper</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">map</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">document</span><span class="o">,</span> <span class="n">Emitter</span> <span class="n">emitter</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">document</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"type"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="s">"task"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">type</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">Boolean</span> <span class="n">complete</span> <span class="o">=</span> <span class="o">(</span><span class="n">Boolean</span><span class="o">)</span> <span class="n">document</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"complete"</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span><span class="n">complete</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">taskList</span> <span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;)</span> <span class="n">document</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"taskList"</span><span class="o">);</span>
                    <span class="n">String</span> <span class="n">listId</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">taskList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
                    <span class="n">emitter</span><span class="o">.</span><span class="na">emit</span><span class="o">(</span><span class="n">listId</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">},</span> <span class="k">new</span> <span class="n">Reducer</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">Object</span> <span class="nf">reduce</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">keys</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">values</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">rereduce</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// keys: [0, 0]</span>
            <span class="c1">// values: [null, null]</span>
            <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">},</span> <span class="s">"1.0"</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">final</span> <span class="n">LiveQuery</span> <span class="n">incompTasksCountLiveQuery</span> <span class="o">=</span> <span class="n">incompTasksCountView</span><span class="o">.</span><span class="na">createQuery</span><span class="o">().</span><span class="na">toLiveQuery</span><span class="o">();</span>
<span class="n">incompTasksCountLiveQuery</span><span class="o">.</span><span class="na">setGroupLevel</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</code></pre></div>
<p><block class="all" /></p>

<p>This time, you call emit only if the document <code>type</code> is &quot;task&quot; and <code>complete</code> is <code>false</code>. The document ID of the list it belongs to (<strong>doc.taskList._id</strong>) serves as the key and the value is nil. The reduce function simply counts the number of rows with the same key. Notice that the <strong>groupLevel</strong> is a property on the live query object.</p>

<p>Every time there is a change to <code>incompTasksCountsLiveQuery.rows</code> the <code>observeValueForKeyPath</code> method is called which will reload the list count for each row.</p>

<p><block class="ios" /></p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// This code can be found in ListsViewController.swift</span>
<span class="c1">// in the observeValue(forKeyPath:of:_:_:) method</span>
<span class="k">override</span> <span class="kd">func</span> <span class="nf">observeValue</span><span class="p">(</span><span class="n">forKeyPath</span> <span class="nv">keyPath</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span> <span class="n">of</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Any</span><span class="p">?,</span> <span class="nv">change</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSKeyValueChangeKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]?,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">UnsafeMutableRawPointer</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">object</span> <span class="k">as?</span> <span class="kt">NSObject</span> <span class="o">==</span> <span class="n">listsLiveQuery</span> <span class="p">{</span>
        <span class="nf">reloadTaskLists</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">object</span> <span class="k">as?</span> <span class="kt">NSObject</span> <span class="o">==</span> <span class="n">incompTasksCountsLiveQuery</span> <span class="p">{</span>
        <span class="nf">reloadIncompleteTasksCounts</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><block class="net" /></p>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"> <span class="n">_incompleteQuery</span><span class="p">.</span><span class="n">Changed</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> 
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">newItems</span> <span class="p">=</span> <span class="n">TasksList</span><span class="p">.</span><span class="nf">ToList</span><span class="p">();</span>
    <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">row</span> <span class="k">in</span> <span class="n">e</span><span class="p">.</span><span class="n">Rows</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">var</span> <span class="n">item</span> <span class="p">=</span> <span class="n">newItems</span><span class="p">.</span><span class="nf">FirstOrDefault</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">DocumentID</span> <span class="p">==</span> <span class="n">row</span><span class="p">.</span><span class="n">Key</span> <span class="k">as</span> <span class="kt">string</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">item</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">item</span><span class="p">.</span><span class="n">IncompleteCount</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">row</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">TasksList</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="n">newItems</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p><block class="android" /></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">incompTasksCountLiveQuery</span><span class="o">.</span><span class="na">addChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="n">LiveQuery</span><span class="o">.</span><span class="na">ChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changed</span><span class="o">(</span><span class="n">LiveQuery</span><span class="o">.</span><span class="na">ChangeEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">runOnUiThread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">counts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
                <span class="n">QueryEnumerator</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">incompTasksCountLiveQuery</span><span class="o">.</span><span class="na">getRows</span><span class="o">();</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">QueryRow</span> <span class="n">row</span> <span class="o">:</span> <span class="n">rows</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">String</span> <span class="n">listId</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">row</span><span class="o">.</span><span class="na">getKey</span><span class="o">();</span>
                    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">row</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
                    <span class="n">counts</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">listId</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">incompCounts</span> <span class="o">=</span> <span class="n">counts</span><span class="o">;</span>
                <span class="n">mAdapter</span><span class="o">.</span><span class="na">notifyDataSetChanged</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">incompTasksCountLiveQuery</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div>
<p><block class="all" /></p>
<h3><a class="anchor instructions" name="try-it-out"></a>Try it out<a class="hash-link instructions" href="#try-it-out"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<ol>
<li>Build and run.</li>
<li>You will see the uncompleted task count for each list.</li>
</ol>

<p><block class="ios" /></p>

<p><img src="./img/image08.png" class="portrait" /></p>

<p><block class="xam" /></p>

<p><strong>iOS</strong>
<img src="./img/image08.png" class="portrait" />
<strong>Android</strong>
<img src="./img/image08xa.png" class="portrait" /></p>

<p><block class="wpf" /></p>

<p><img src="./img/image08w.png" class="center-image" /></p>

<p><block class="android" /></p>

<p><img src="img/image08a.png" class="portrait" /></p>

<p><block class="all" /></p>
<h2><a class="anchor instructions" name="conclusion"></a>Conclusion<a class="hash-link instructions" href="#conclusion"><svg aria-hidden="true" class="octicon octicon-link" height="20" version="1.1" viewBox="0 -3 20 20" width="20"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>Well done! You&#39;ve completed this lesson on using CRUD operations with the database and running aggregation queries. In the next lesson, you&#39;ll learn how to use Couchbase Lite&#39;s synchronization APIs with Sync Gateway. Feel free to share your feedback, findings or ask any questions on the forums.</p>

                <!-- Logic to make all links open in a new tab -->
                <script>
                  var links = document.links;

                  for (var i = 0, linksLength = links.length; i < linksLength; i++) {
                    if (['button-swift', 'button-objc', 'button-csharp', 'button-java', 'button-ios', 'button-android', 'button-wpf'].indexOf(links[i].className) == -1) {
                      if (links[i].hostname != window.location.hostname) {
                        links[i].target = '_blank';
                      }
                    }
                  }
                </script>
                <!-- Logic for platform tabs -->
                <script>
                  // Only show on Develop pages
                  var blocksv1 = document.getElementsByClassName('ios');
                  var blocksv2 = document.getElementsByClassName('swift');
                  if ((blocksv1.length > 0 && blocksv1[0].tagName == 'BLOCK') || (blocksv2.length > 0 && blocksv2[0].tagName == 'BLOCK')) {
                    var platformTabs = document.getElementById('platform-tabs');
                    platformTabs.className = "show";
                  }
                  // Convert <div>...<span><block /></span>...</div>
                  // Into <div>...<block />...</div>
                  var blocks = document.getElementsByTagName('block');
                  for (var i = 0; i < blocks.length; ++i) {
                    // Ignore blocks that have the inline class name.
                    if (blocks[i].className.indexOf('inline') == -1) {
                      var block = blocks[i];
                      var span = blocks[i].parentNode;
                      var container = span.parentNode;
                      container.insertBefore(block, span);
                      container.removeChild(span);
                    }
                  }
                  // Convert <div>...<block />content<block />...</div>
                  // Into <div>...<block>content</block><block />...</div>
                  blocks = document.getElementsByTagName('block');
                  for (var i = 0; i < blocks.length; ++i) {
                    // Ignore blocks that have the inline class name.
                    if (blocks[i].className.indexOf('inline') == -1) {
                      var block = blocks[i];
                      while (block.nextSibling && block.nextSibling.tagName !== 'BLOCK') {
                        block.appendChild(block.nextSibling);
                      }
                    }
                  }
                  function display(type, value, isFirstPageLoad) {
                    deleteCookie('mobile-lang');
                    setCookie('mobile-lang', value, 365);
                    if (!isFirstPageLoad) {
                      var newurl = UpdateQueryString('language', value);
                      window.history.pushState({path: newurl}, '', newurl);
                    }
                    // Place the display-platform-* class on div.inner-content
                    var container = document.getElementsByClassName('inner-content')[0];
                    container.className = 'inner-content display-' + type + '-' + value;
                    if (value == 'wpf' || value == 'csharp' || value == 'xam') {
                      container.className += ' display-platform-net';
                    }
                    container.className += ' display-platform-all';
                    return false;
                  }

                  // If we are coming to the page with a hash in it (i.e. from a search, for example), try to get
                  // us as close as possible to the correct platform and dev os using the hashtag and block walk up.
                  var foundHash = false;
                  var language = getParameterByName('language');
                  if (['ios', 'android', 'csharp', 'swift', 'objc', 'wpf', 'java'].indexOf(language) > -1) {
                    foundHash = true;
                    display('platform', language, true);
                  }

                  if (!foundHash) {
                    var cookie_lang = getCookie('mobile-lang');
                    if (document.getElementsByClassName(cookie_lang).length > 0) {
                      display('platform', cookie_lang, true);
                    } else {
                      if (document.getElementsByClassName('swift').length > 0) {
                        display('platform', 'swift', true);
                      } else if (document.getElementsByClassName('ios').length > 0) {
                        display('platform', 'ios', true);
                      }
                    }
                  }

                  function getParameterByName(name, url) {
                    if (!url) {
                      url = window.location.href;
                    }
                    name = name.replace(/[\[\]]/g, "\\$&");
                    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                      results = regex.exec(url);
                    if (!results) return null;
                    if (!results[2]) return '';
                    return decodeURIComponent(results[2].replace(/\+/g, " "));
                  }
                  function setCookie(cname, cvalue, exdays) {
                    var d = new Date();
                    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                    var expires = "expires="+d.toUTCString();
                    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                  }
                  function deleteCookie(cname) {
                    document.cookie = cname + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                  }
                  function getCookie(cname) {
                    var name = cname + "=";
                    var decodedCookie = decodeURIComponent(document.cookie);
                    var ca = decodedCookie.split(';');
                    for(var i = 0; i <ca.length; i++) {
                      var c = ca[i];
                      while (c.charAt(0) == ' ') {
                        c = c.substring(1);
                      }
                      if (c.indexOf(name) == 0) {
                        return c.substring(name.length, c.length);
                      }
                    }
                    return "";
                  }
                  function UpdateQueryString(key, value, url) {
                    if (!url) url = window.location.href;
                    var re = new RegExp("([?&])" + key + "=.*?(&|#|$)(.*)", "gi"),
                      hash;

                    if (re.test(url)) {
                      if (typeof value !== 'undefined' && value !== null)
                        return url.replace(re, '$1' + key + "=" + value + '$2$3');
                      else {
                        hash = url.split('#');
                        url = hash[0].replace(re, '$1$3').replace(/(&|\?)$/, '');
                        if (typeof hash[1] !== 'undefined' && hash[1] !== null)
                          url += '#' + hash[1];
                        return url;
                      }
                    }
                    else {
                      if (typeof value !== 'undefined' && value !== null) {
                        var separator = url.indexOf('?') !== -1 ? '&' : '?';
                        hash = url.split('#');
                        url = hash[0] + separator + key + '=' + value;
                        if (typeof hash[1] !== 'undefined' && hash[1] !== null)
                          url += '#' + hash[1];
                        return url;
                      }
                      else
                        return url;
                    }
                  }
                </script>
                <!-- Segment.io analytics -->
                <script type="text/javascript">
                  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
                    analytics.load("8mPwsJfsKAal6r62qS9ubBQqjWwYly4M");
                    analytics.page()
                  }}();
                </script>
                <script>
                  var starterProject = document.getElementById('project');
                  analytics.trackLink(starterProject, 'Download project', {
                    category: 'Training',
                    label: 'Swift'
                  });
                </script>
                <!-- SDK buttons (shown only if show_true=true in the SDK) -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js"></script>
                <script>

                  if (getParameterByName("show_swagger_libs") || getParameterByName("swagger")) {
                    var swagger_libs_el = document.getElementById('swagger-libs');
                    swagger_libs_el.style.display = 'block';
                  }

                  function getSDK(lang, spec) {
                    var url = null;
                    switch(spec) {
                      case 'public':
                        url = 'http://developer.couchbase.com/mobile/swagger/sync-gateway-public/spec.json';
                        break;
                      case 'admin':
                        url = 'http://developer.couchbase.com/mobile/swagger/sync-gateway-admin/spec.json';
                        break;
                      case 'lite':
                        url = 'http://developer.couchbase.com/mobile/swagger/couchbase-lite/spec.json';
                        break;
                    }
                    fetch(url)
                      .then(function (res) {
                        return res.json();
                      })
                      .then(function (res) {
                        var options = {
                          method: 'POST',
                          headers: {
                            'Content-Type': 'application/json'
                          },
                          body: JSON.stringify({spec: res})
                        };
                        return fetch('http://generator.swagger.io/api/gen/clients/' + lang, options)
                      })
                      .then(function (res) {
                        return res.json();
                      })
                      .then(function (res) {
                        window.location = res.link;
                      });
                  }

                  function getParameterByName(name, url) {
                    if (!url) url = window.location.href;
                    name = name.replace(/[\[\]]/g, "\\$&");
                    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                      results = regex.exec(url);
                    if (!results) return null;
                    if (!results[2]) return '';
                    return decodeURIComponent(results[2].replace(/\+/g, " "));
                  }
                </script>
              </div>

              <script>
                /**
                 * HACK: To keep the code tabs while using markdown. Insert <div class="tab"></div> in the markdown and this script
                 * finds and replaces all instances with a tab bar.
                 */
                var tab_bar_html = "</div><a href='javascript:setLanguage(\"swift\")' class=\"tab stripe-active swift\">Swift</a> <a href='javascript:setLanguage(\"objective-c\")' class=\"tab stripe-active objective-c selected\">Objective-C</a> <a href='javascript:setLanguage(\"android\")' class=\"tab stripe-active android\">Android</a> <a href='javascript:setLanguage(\"java\")' class=\"tab stripe-active java\">Java</a> <a href='javascript:setLanguage(\"c\")' class=\"tab stripe-active c\">C#</a>"
                var tab_bars = document.getElementsByClassName('tabs');
                var i = tab_bars.length - 1;
                while (i >= 0) {
                  var parent = tab_bars.item(i).parentNode;
                  var element = document.createElement('div');
                  element.className = 'tab-bar';
                  element.innerHTML = tab_bar_html;
                  parent.replaceChild(element, tab_bars.item(i));
                  i--;
                }

                /**
                 * HACK: To keep the markdown tables styles after ingestion we need to wrap the ouput in <div class="table"></div>
                 */
                var tables = document.getElementsByTagName("table");
                var j = tables.length - 1;
                while (j >= 0) {
                  var parent = tables.item(j).parentNode;
                  var table = tables.item(j);
                  var wrapper = document.createElement('div');
                  wrapper.className = 'table';
                  wrapper.style.padding = 0;
                  parent.insertBefore(wrapper, table);
                  wrapper.appendChild(table);
                  j--;
                }
              </script>
              <script>
                /**
                 * Hack to not open some list titles
                 */
                (function() {
                  var els = document.getElementsByClassName('static');
                  for (var i = 0; i < els.length; i++) {
                    (function() {
                      var el = els[i];
                      el.onclick = function () {
                        var icon = el.previousSibling;
                        var iconClasses = icon.className;
                        if (iconClasses == 'icon') {
                          icon.className = 'icon close';
                        } else {
                          icon.className = 'icon';
                        }
                        var list = el.nextSibling;
                        var displayProp = list.style.display;
                        if (displayProp == 'block') {
                          list.style.display = 'none';
                        } else {
                          list.style.display = 'block';
                        }
                      }
                    })()
                  }
                })()
              </script>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>
  
</main>
  </div>
</div>

<!-- Require_js bootstrap for app-specific JS module support -->
<!-- data-main attribute tells require.js to load
scripts/main.js after require.js loads. -->
<script type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/require.js"></script>
<script type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/prism.js"></script>
<script rel="main" type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/main.js" ></script>
<!-- leave the main attribute, it is used to help main.js determine -->
<!-- the domain-relative path to the base script (main.js) -->

</body>

</html>